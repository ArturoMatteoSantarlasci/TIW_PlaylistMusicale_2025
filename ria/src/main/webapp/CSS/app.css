
/* ==========================================================================
    Apple Music–inspired Theme (customized pink variant)
    Target: header, playlists-vertical, track-card, modals, auth pages
    ========================================================================== */

/* ------------------------------
   Design Tokens
   ------------------------------ */
:root {
    /* Light theme (default) */
    --am-bg: #ffffff;
    --am-bg-alt: #f5f5f7;          /* page sections */
    --am-surface: #ffffff;         /* cards */
    --am-text: #fa2c8b;
    --am-muted: #6e6e73;
    --am-border: #ffffff;
    --am-accent: #fa2c8b;          /* Apple pink */
    --am-accent-press: #fa2c8b;
    --am-shadow: 0 6px 20px rgba(0,0,0,.08);
    --am-radius: 16px;
    --am-radius-pill: 999px;
    --am-ctrl-h: 52px;
    --am-ctrl-h-sm: 44px;
    --am-icon: 38px;
    --am-focus: 0 0 0 3px rgb(250, 44, 139);
    /* Altezza pulsanti scrollbar multi-select (somma top+bottom = riduce la lunghezza utile del track). 52px ~ 20% ciascuno su 260px => track ~60%. */
    --track-multi-scroll-btn-h:52px;
    /* Percentuale altezza coperta (top e bottom) per accorciare visivamente la scrollbar: 20% + 20% = 40% nascosta */
    --track-multi-scroll-mask:20%;
}

/* ======================= PURE_HTML THEME PORT (Black variant) ======================= */
/* Global enhancement: add 2px black outline (inset) to elements that formerly used only light gray borders.
   We exclude the outer playlists container to avoid a giant rectangle. */
.board,
.field,
.playlist-card-row,
.track-card,
.track-cover,
.track,
.track-choice,
.playlist-tracks-block,
.playlist-tracks-list li,
.playlist-tracks-actions button,
.title-strip-inner,
.title-box,
.player-track-info,
.cover-thumb,
.mini-player,
.badge,
.iconbtn,
.iconbtn.tiny,
.actions-row .btn,
.btn,
.button {
    /* remove heavy black inset while preserving the subtle theme shadow */
    box-shadow: var(--am-shadow, 0 6px 20px rgba(0,0,0,.08));
}

/* Excluded modals from the global inset shadow; give them their own outer shadow so the pink border stays clean */
.modal, .modal-content { box-shadow: 0 24px 54px -14px rgba(0,0,0,.45) !important; }

/* Dark variant for main title box (login/register) */
.title-box {
    /* Restored pill shape & spacing (only color changed from original) */
    margin:26px auto 18px;
    text-align:center;
    font-weight:800;
    letter-spacing:.5px;
    font-size:clamp(1.4rem,1.1rem + .9vw,2rem);
    padding:14px 30px;
    background:#000;
    border:2px solid var(--am-accent);
    border-radius:40px; /* pill */
    color:#fff;
    max-width:760px;
    box-shadow:0 6px 20px -6px rgba(0,0,0,.55);
}

/* Header buttons + title strip adopt black theme */
.header .btn, .header .button, .header .iconbtn {
    background:#000 !important;
    color:#fff !important;
    border-color:var(--am-accent) !important;
}
.header .btn:hover, .header .button:hover, .header .iconbtn:hover { background:#0f0f0f !important; box-shadow:0 6px 18px rgba(0,0,0,.45); }
.header .btn:active, .header .button:active, .header .iconbtn:active { transform:translateY(1px); }

.title-strip-inner {
    background:#000 !important;
    color:#fff !important;
    box-shadow:0 6px 20px -6px rgba(0,0,0,.55) !important;
}

/* Global dark buttons: default buttons become black with accent border */
.btn, .button {
    background:#000;
    color:#fff;
    border:2px solid var(--am-accent);
    box-shadow:0 1px 0 rgba(0,0,0,.4);
    font-size:1.15rem; /* unified */
}
.btn:hover, .button:hover {
    /* translucent pink hover instead of deeper black */
    background:rgba(250,44,139,0.18);
    box-shadow:0 6px 18px rgba(0,0,0,.55);
    color:#fff;
}
.btn:active, .button:active {
    transform:translateY(1px);
    background:rgba(250,44,139,0.28);
    color:#fff;
}

/* Accent variant unchanged (kept vivid) */
.btn.accent { background:var(--am-accent); border-color:color-mix(in oklab,var(--am-accent) 85%,#000); }
.btn.accent:hover { background:var(--am-accent); box-shadow:0 8px 22px rgb(250, 44, 139); }
.btn.accent:active { background:var(--am-accent-press); }

/* Black playlist cards with gradient and centered white text */
.playlist-card-row {
    background:#000 !important;
    background:linear-gradient(135deg,#050505 0%,#0b0b0b 55%,#141414 100%) !important;
    color:#fff !important;
    display:flex;
    position:relative;
    align-items:center;
    justify-content:center;
    padding:22px 16px;
    border:2px solid var(--am-accent);
    transition:background .4s ease, box-shadow .25s ease, transform .06s ease, border-color .25s ease;
}
.playlist-card-row .pl-name { color:#fff !important; text-align:center; width:100%; }
.playlist-card-row:hover { background:linear-gradient(135deg,#0a0a0a 0%,#121212 55%,#1a1a1a 100%) !important; box-shadow:0 8px 22px rgba(0,0,0,.45); }
.playlist-card-row:focus-visible { outline:2px solid var(--am-accent); outline-offset:3px; box-shadow:0 0 0 3px rgba(250,44,139,.35),0 10px 28px -6px rgba(0,0,0,.55); }
.playlist-card-row:active { transform:translateY(1px); }

.playlist-card-row::after {
    content:"";
    position:absolute;
    left:18px; /* moved to left so decorative note is on the card's left */
    bottom:8px;
    width:34px;
    height:34px;
    background:#000 url('../img/icon2.png') center/60% no-repeat;
    border:2px solid var(--am-accent);
    border-radius:12px;
    pointer-events:none;
    opacity:.85;
    transition:opacity .25s ease, transform .25s ease;
}
.playlist-card-row:hover::after { opacity:1; transform:translateY(-2px); }
.playlist-card-row:active::after { transform:translateY(0); }

/* Strengthen player container to match dark theme parity */
.player-track-info { border:2px solid var(--am-accent); }
.player-text audio { border:2px solid var(--am-accent); }

/* Mini player adjust (ensure black outline coherence) */
.mini-player { border-top:2px solid var(--am-accent); }

/* ===================== END THEME PORT ===================== */

/* Auth pages black container */
.auth-box {
    background:#000;
    border:2px solid var(--am-accent);
    border-radius:46px;
    padding:40px 46px 46px;
    max-width:1220px;
    margin:0 auto 34px;
    box-shadow:0 10px 28px -6px rgba(0,0,0,.45);
    display:block;
}
.auth-box form.stack { gap:26px; }
.auth-box .field { background:#fff; }
/* Secondary link style inside black box: outline variant (white bg optional) */
.btn.auth-secondary {
    background:#000;
    color:#fff;
    border:2px solid var(--am-accent);
    font-size:1.15rem;
}
.btn.auth-secondary:hover {
    background:rgba(250,44,139,0.18);
    color:#fff;
}
.btn.auth-secondary:active { background:rgba(250,44,139,0.30); }
@media (prefers-color-scheme: dark) {
    :root {
        --am-bg: #0b0b0f;            /* near‑black with subtle blue tint */
        --am-bg-alt: #121216;
        --am-surface: #16161b;
        --am-text: #f5f5f7;
        --am-muted: #a1a1aa;
        --am-border: #000000;
        --am-accent: #000000;
        --am-accent-press: #fa2c8b;
        --am-shadow: 0 10px 28px rgba(0,0,0,.35);
    }
}

/* ------------------------------
   Global reset + typography
   ------------------------------ */
html { -webkit-text-size-adjust: 100%; }
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
    margin: 0;
    color: var(--am-text);
    background: var(--am-bg);

        font-family: -apple-system,BlinkMacSystemFont,Apple Color Emoji,SF Pro,SF Pro Icons,Helvetica Neue,Helvetica,Arial,sans-serif;

    /*-webkit-font-smoothing: antialiased;*/
    /*-moz-osx-font-smoothing: grayscale;*/
    line-height: 1.55;
    /* Global background image with dark mask */
    background-image:linear-gradient(rgba(0,0,0,0.01),rgba(0,0,0,0.01)),url('../img/background.jpg');
    background-size:cover; background-position:center center; background-repeat:no-repeat; background-attachment:fixed;
}

/* Page shell */
body.page-home {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    /* use only color property so we do NOT wipe the background-image set on body */
    background-color: transparent !important;
}

/* Safety override: ensure any later scripts/styles cannot remove the image after login */
body.page-home, body.page-home:after {
    background-image:linear-gradient(rgba(0,0,0,0.01),rgba(0,0,0,0.01)),url('../img/background.jpg') !important;
    background-size:cover !important; background-position:center center !important; background-repeat:no-repeat !important; background-attachment:fixed !important;
}
/* When using the player blurred background, hide the global background image */
body.has-player-bg, body.has-player-bg:after { background-image: none !important; }

/* Auth & general title boxed variant (compact) */
/* (Removed light variant of .title-box; black variant defined at top retains) */

/* Utilities */
.sr-only { position:absolute; width:1px; height:1px; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); }
.hidden { display:none !important; }

.wrap { width: 100%; max-width: 1220px; margin: 0 auto; padding: 0 24px; }
.panel, .stack { display: grid; gap: 18px; }

/* ------------------------------
   Header (sticky, blurred like AM)
   ------------------------------ */
.header {
    position: sticky;
    top: 0;
    z-index: 100;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 12px;
    padding: 12px 20px;
    background: color-mix(in oklab, var(--am-bg) 90%, transparent);
    backdrop-filter: saturate(120%) blur(12px);
    border-bottom: 1px solid var(--am-border);
}

.header-title {
    margin: 0;
    text-align: center;
    font-weight: 800;
    letter-spacing: .2px;
    font-size: clamp(1.25rem, 1rem + 1.2vw, 2rem);
}

/* ------------------------------
   Section container
   ------------------------------ */
.main {
    flex: 1;
    padding: 18px 0 36px;
    background: transparent;
}
/* Subtle glass effect on elevated surfaces for readability over image */
.player-track-info,.playlist-card-row,.board,.modal,.mini-player,.title-box,.title-strip-inner,.auth-box{backdrop-filter:saturate(130%) blur(6px);}

.board {
    background: var(--am-surface);
    border: 1px solid var(--am-border);
    border-radius: var(--am-radius);
    padding: 22px;
    box-shadow: var(--am-shadow);
}

/* Full-width title strip under header */
.title-strip { width:100%; margin:18px 0 14px; }
.title-strip-inner { max-width:1220px; margin:0 auto; padding:14px 34px; background:#fff; border:2px solid var(--am-accent); border-radius:46px; font-weight:800; font-size:clamp(1.4rem,1.05rem + .9vw,2rem); letter-spacing:.5px; text-align:center; color:#000; box-shadow:0 3px 10px -4px rgba(0,0,0,.10); }
.playlists-wrapper { max-width:1220px; margin:0 auto; padding:0 24px 40px; }
.tracks-wrapper { max-width:1220px; margin:0 auto; padding:0 24px 40px; }
.tracks-pagination { display:flex; align-items:center; justify-content:space-between; margin-top:34px; gap:8px; }
.tracks-pagination .left { margin-left:8px; }
.tracks-pagination .right { margin-right:8px; }
.tracks-pagination .center { flex:1; text-align:center; font-weight:600; }
/* Force dark theme for pagination prev/next buttons */
.tracks-pagination .button.left,
.tracks-pagination .button.right,
.tracks-pagination .btn.left,
.tracks-pagination .btn.right{
    background:#000;
    color:#fff;
    border:2px solid var(--am-accent);
    box-shadow:0 1px 0 rgba(0,0,0,.4);
}
.tracks-pagination .button.left:hover,
.tracks-pagination .button.right:hover,
.tracks-pagination .btn.left:hover,
.tracks-pagination .btn.right:hover{
    background:rgba(250,44,139,0.18);
    color:#fff;
    box-shadow:0 6px 18px rgba(0,0,0,.55);
}
.tracks-pagination .button.left:active,
.tracks-pagination .button.right:active,
.tracks-pagination .btn.left:active,
.tracks-pagination .btn.right:active{
    background:rgba(250,44,139,0.28);
    color:#fff;
    transform:translateY(1px);
}

/* ------------------------------
   Controls (buttons, fields, icon buttons)
   ------------------------------ */
.btn, .button {
    -webkit-tap-highlight-color: transparent;
    height: var(--am-ctrl-h);
    border-radius: var(--am-radius-pill);
    border: 2px solid var(--am-accent);
    background: #000;
    color: #fff;
    font-weight: 800;
    letter-spacing: .3px;
    padding: 0 20px;
    cursor: pointer;
    transition: transform .05s ease, box-shadow .15s ease, background .15s ease, color .15s ease;
    box-shadow: 0 1px 0 rgba(0,0,0,.12);
    text-decoration: none;
}
.btn:hover, .button:hover { box-shadow: 0 6px 18px rgba(0,0,0,.14); }
.btn:active, .button:active { transform: translateY(1px); }

/* Secondary (outlined) */
.btn.secondary, .button.logout, .logout.button { height: var(--am-ctrl-h); background: #fff; color:#000; border-color: var(--am-accent); }
.btn.secondary:hover,
.button.logout:hover,
.logout.button:hover {
    background: #fff;
    filter:brightness(0.95);
}

/* Accent (Apple blue) */
.btn.accent {
    background: var(--am-accent);
    border-color: color-mix(in oklab, var(--am-accent) 85%, #000);
}
.btn.accent:hover { background: var(--am-accent); box-shadow: 0 8px 22px rgb(250, 44, 139); }
.btn.accent:active { background: var(--am-accent-press); }

/* Icon-only circular button */
.iconbtn {
    width: var(--am-icon);
    height: var(--am-icon);
    display: grid;
    place-items: center;
    border-radius: 50%;
    border: 2px solid var(--am-accent);
    background: var(--am-surface);
    cursor: pointer;
    transition: background .15s ease, transform .05s ease;
}
.iconbtn:hover { background: color-mix(in oklab, var(--am-surface) 92%, var(--am-text)); }
.iconbtn:active { transform: translateY(1px); }
/* Uniform primary navigation icon buttons (home/back) to match pill height visually */
/* Uniform primary navigation icon buttons (home/back) to match pill height visually */
#homepage-button.iconbtn,
#back-to-playlist-button.iconbtn {
    width:53px; /* unified size */
    height:53px;
    border-radius:var(--am-radius-pill);
    background:#000;
    color:#fff;
    box-shadow:0 1px 0 rgba(0,0,0,.4);
}
#homepage-button.iconbtn svg { width:29px; height:29px; }

#back-to-playlist-button.iconbtn svg { width:29px; height:39px; }

/* Add hover shadow consistent with other primary buttons */
#homepage-button.iconbtn:hover,
#back-to-playlist-button.iconbtn:hover {
    box-shadow: 0 6px 18px rgba(0,0,0,.55);
    background: rgba(250,44,139,0.18); /* keep parity with .button:hover */
}

/* Form fields */
.field {
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
    height: var(--am-ctrl-h);
    padding: 0 16px;
    border-radius: var(--am-radius-pill);
    background: var(--am-surface);
    border: 1px solid var(--am-border);
    margin-bottom: 12px;
}
.field input {
    width: 100%;
    border: 0;
    outline: 0;
    background: transparent;
    color: var(--am-text);
    font-size: 1rem;
}

/*.field select {*/
/*    padding-left: 3px !important;*/
/*}*/
.badge {
    position: absolute;
    top: 50%; left: 8px;
    transform: translateY(-50%);
    width: 42px; height: 42px;
    border-radius: 50%;
    background: var(--am-accent);
    color: #fff;
    display: grid; place-items: center;
    box-shadow: 0 6px 16px rgb(250, 44, 139);
}
.field.pad-left { padding-left: 64px; }

/* Center auth form buttons (login/register). Stack already grid; ensure full width buttons consistent */
form.stack > .btn, form.stack > .button, form.stack > a.btn { width:100%; display:flex; align-items:center; justify-content:center; }
form.stack > a.btn { text-align:center; }
/* Remove underline explicitly */
a.btn { text-decoration:none; }

/* Focus visible */
.button:focus-visible, .btn:focus-visible, .field:focus-within,
.iconbtn:focus-visible, .playlist-card-row:focus-visible, .track-card:focus-visible {
    outline: none;
    box-shadow: var(--am-focus);
}

/* ------------------------------
   Lists: Playlists (vertical rows)
   ------------------------------ */
.playlists-vertical { display:grid; gap:6px; margin-top:4px; }

.playlist-card-row {
    position: relative;
    display: block;
    /* symmetrical horizontal padding (reorder left 18px, icon right 18px, internal gap) */
    padding:16px 78px 16px 78px;
    background: var(--am-surface);
    border: 1px solid var(--am-border);
    border-radius: var(--am-radius);
    cursor: pointer;
    transition: background .15s ease, transform .06s ease, box-shadow .15s ease, border-color .15s ease;
}
.playlist-card-row:hover {
    background: color-mix(in oklab, var(--am-surface) 90%, var(--am-text));
    box-shadow: 0 8px 22px rgba(0,0,0,.08);
    border-color: color-mix(in oklab, var(--am-border) 70%, var(--am-text));
}
.playlist-card-row:active { transform: translateY(1px); }

.playlist-card-row .pl-name { margin:0; font-weight:800; font-size:1rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; letter-spacing:.2px; color:#000; }

.playlist-reorder-inline,
.reorder-btn {
    position: absolute;
    top: 50%;
    right:18px; /* place reorder button on the right edge */
    transform: translateY(-50%);
    width:38px; height:38px;
    display:grid; place-items:center;
    background:#fff;
    color:#000;
    border:2px solid var(--am-accent);
    border-radius:12px;
    cursor:pointer;
    z-index:2;
    box-shadow:0 2px 6px -2px rgba(0,0,0,.35);
    transition:background .15s ease, transform .06s ease, box-shadow .2s ease;
}
.playlist-reorder-inline:hover,
.reorder-btn:hover { background:#f3f3f3; box-shadow:0 4px 12px -3px rgba(0,0,0,.5); }
.playlist-reorder-inline:active,
.reorder-btn:active { transform: translateY(-50%) translate(-1px,-1px); }
.reorder-btn svg { width: 18px; height: 18px; }

/* ------------------------------
   Tracks (vertical cards)
   ------------------------------ */
.tracks-vertical { display:grid; gap:8px; margin-top:8px; }

.track-card {
    display: grid;
    grid-template-columns: 60px 1fr;
    gap: 14px;
    align-items: center;
    min-height: 76px;
    padding: 12px 14px;
    background: #000 !important;
    border: 1px solid var(--am-border);
    border-radius: var(--am-radius);
    cursor: pointer;
    transition: background .15s ease, transform .06s ease, box-shadow .15s ease, border-color .15s ease;
}
/*.track-card:hover {*/
/*    background: color-mix(in oklab, var(--am-surface) 90%, var(--am-text));*/
/*    box-shadow: 0 8px 22px rgba(0,0,0,.08);*/
/*    border-color: color-mix(in oklab, var(--am-border) 70%, var(--am-text));*/
/*}*/
.track-card:active { transform: translateY(1px); }

.track-cover {
    width: 60px; height: 60px;
    border-radius: 12px;
    overflow: hidden;
    background: #f0f0f0;
    border: 1px solid var(--am-border);
    display: grid; place-items: center;
}
.track-cover img { width: 100%; height: 100%; object-fit: cover; display: block; }
.track-cover--placeholder { color: var(--am-muted); font-size: 1rem; opacity: .8; }

.track-info { min-width: 0; display: grid; gap: 4px; }
.track-title {
    font-weight: 700;
    font-size: .98rem;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    color:#fff;
}
.track-sub {
    font-size: .78rem;
    color: var(--am-muted);
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* ------------------------------
   Player view
   ------------------------------ */
.player-track-info {
    display: flex;
    gap: 28px;
    align-items: center;
    flex-wrap: nowrap;
    margin: 26px auto 0;
    padding: 30px 46px 40px 46px;
    max-width: 1240px;
    background: #000;
    color:#fff;
    border: 2px solid var(--am-accent);
    border-radius: 46px;
    box-shadow: 0 6px 20px -6px rgba(0,0,0,.55);
}
.player-cover {
    flex: 0 0 auto;
    max-width: 480px;
    border-radius: 30px;
    overflow: visible;
    
    box-shadow: 0 6px 18px rgba(0,0,0,.12);
}
.player-cover img { display:block; width:100%; height:auto; }
.player-text { flex: 1 1 auto; min-width: 0; display:grid; gap: 6px; }
.player-title { font-weight: 800; font-size: 1.25rem; letter-spacing: .2px; color:#000; }
.player-artist, .player-album, .player-year, .player-genre {
    font-size: .9rem; color: var(--am-muted);
}

.player-track-info .player-artist {
    color: #fff !important;
    font-weight: 800 !important;
}
.player-sep { display:none; }
.player-text audio {
    width: 100%;
    max-width: 640px;
    background: #fff;
    border: 2px solid var(--am-accent);
    border-radius: var(--am-radius-pill);
    padding: 10px 20px;
    display: block;
    box-sizing: border-box;
    margin-top: 4px;
}

/* Dark mode tweaks for new player styles */
@media (prefers-color-scheme: dark) {
    .player-title { color: #f5f5f7; }
    .player-text audio { background: var(--am-surface); border-color: var(--am-accent); }
    .player-track-info { background:#000; }
}

/* ------------------------------
   Modal nav bars (for compatibility)
   ------------------------------ */
.nav-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}
.spacer { flex: 1; }
.modal-window {
    position: fixed; inset: 0;
    display: grid; place-items: center;
    background: rgba(0,0,0,.55);
    z-index: 9999;
}

.modal-content .btn, .modal-content .button {
    background: #000 !important;
    color: #fff !important;
}


.modal-content {
    width: min(560px, 92vw);
    max-height: 82vh; overflow: auto; /* enable internal scrolling but hide scrollbar visuals below */
    background: #fff;
    border: 2px solid var(--am-accent);
    border-radius: 46px;
    padding: 34px 40px 42px;
    box-shadow: 0 24px 54px -14px rgba(0,0,0,.45);
}
.modal-content::-webkit-scrollbar { display: none; }
.modal-content { -ms-overflow-style: none; scrollbar-width: none; }

/* Force modal title visible (override other rules) */
.modal-window .modal-title, .modal-content .modal-title { color:#000 !important; background:#fff !important; }

.modal-content select, .modal-window select {
    -webkit-appearance: none;
    appearance: none;
    background-repeat: no-repeat;
    background-position: calc(100% - 6px) center; /* 3px left shift */
    background-size: 12px 12px;
    padding-right: 34px; /* leave space for custom arrow */
}
.modal-content select::-ms-expand, .modal-window select::-ms-expand { display:none; }
.modal-content select {
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='%23000' d='M7 10l5 5 5-5z'/></svg>");
}
.modal-title { margin:0 0 14px; font-size:1.05rem; font-weight:800; color:#000; display:inline-block; padding:8px 20px; border:2px solid var(--am-accent); border-radius:999px; background:#000; }
.modal-content, .modal-window form, .modal-window label, .modal-window input, .modal-window select, .modal-window div, .modal-window span { color:#000; }
.modal-close{background:#fff;border:2px solid var(--am-accent);color:#000;position:relative;bottom:6px;font-weight:700;cursor:pointer;border-radius:50%;width:44px;height:44px;display:grid;place-items:center;line-height:1;padding:0;font-size:1rem}
.modal-close:hover{background:color-mix(in oklab,#fff 94%,var(--am-accent));filter:none}

/* Modal form grid spacing utility */
.modal-form-grid { display:grid; gap:8px; }
/* When using grid gap, remove extra bottom margins on fields inside */
.modal-form-grid .field { margin-bottom:0; }

/* Compact overrides inside modals */
.modal-window .field { gap:6px; height:42px; padding:0 12px; margin-bottom:4px; }
.modal-window .label { margin-bottom:2px; font-size:.78rem; }

/* Extra spacing at bottom of modal forms so last button not glued */
.modal-content form { padding-bottom:12px; }
.modal-content form .btn:last-child, .modal-content form .button:last-child { margin-top:14px; }

/* Push primary modal buttons lower inside specific modals so they appear centered between
   the black inner box and the bottom of the modal. Adjust values if needed. */
#create-playlist .modal-content form,
#add-tracks .modal-content form {
    padding-bottom: 38px; /* increase bottom padding to move the button lower */
}
#create-playlist .modal-content form .nav-bar,
#add-tracks .modal-content form .nav-bar {
    margin-top: 18px; /* extra gap above the bottom navbar inside form */
}

/* ------------------------------
   Labels
   ------------------------------ */
.modal, .modal-content { background:#fff !important; border:2px solid var(--am-accent) !important; border-radius:46px !important; }
.label {
    display: block;
    margin-bottom: 4px;
    font-weight: 600;
    font-size: .85rem;
    color: var(--am-text);
}
.alert {
    margin: 0 0 6px;
    padding: 10px 14px;
    border-radius: 12px;
    background: #fff2f2;
    border: 1px solid #ffdada;
    color: #7a0000;
}
@media (prefers-color-scheme: dark) {
    .alert {
        background: #3a1212;
        border-color: #5a2020;
        color: #ffd7d7;
    }
}

/* ------------------------------
   Helpers & composition
   ------------------------------ */
.actions-row { display:flex; gap:12px; flex-wrap:wrap; justify-content:center; }
.actions-row .btn { width:auto; min-width:200px; }

.floating-home { position: absolute; top: 10px; right: 10px; }

/* One-line ellipsis utility */
.ellipsis-1 { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Smooth hover scale for images */
img.scale-on-hover { transition: transform .25s ease; }
img.scale-on-hover:hover { transform: scale(1.03); }

/* ------------------------------
   Responsive tweaks
   ------------------------------ */
@media (max-width: 880px) {
    .wrap { padding: 0 16px; }
    .actions-row .btn { min-width: 160px; }
    .player-track-info { flex-direction: column; align-items: stretch; }
    .player-cover { max-width: 100%; }
}
/* Inline bottom mini player (parity with pure_html) */
.mini-player { position:fixed; left:0; right:0; bottom:0; z-index:600; display:flex; align-items:center; gap:14px; padding:10px 24px; background:#fff; border-top:2px solid var(--am-accent); box-shadow:0 -4px 18px -4px rgba(0,0,0,.18); font-size:.7rem; letter-spacing:.3px; }
.mini-player.hidden { display:none; }
.mini-player .mini-btn { width:38px; height:38px; border-radius:50%; border:2px solid #000; background:#000; color:#fff; display:grid; place-items:center; cursor:pointer; transition:background .2s ease, transform .07s ease, opacity .2s ease; }
.mini-player .mini-btn:disabled { opacity:.35; cursor:default; }
.mini-player .mini-btn:hover:not(:disabled) { background:#111; }
.mini-player .mini-btn:active:not(:disabled) { transform:translateY(1px); }
.mini-player .mini-meta { flex:1; display:flex; align-items:center; gap:12px; overflow:hidden; white-space:nowrap; }
.mini-player .mini-meta .t { font-weight:700; color:#000; overflow:hidden; text-overflow:ellipsis; max-width:40%; }
.mini-player .mini-meta .s { color:var(--am-muted); overflow:hidden; text-overflow:ellipsis; }
/* Close (X) button: appear at left, slightly smaller */
.mini-player .mini-close { width:38px; height:38px; border-radius:50%; border:2px solid #000; background:#000; color:#fff; display:grid; place-items:center; cursor:pointer; transition:background .2s ease, transform .07s ease; margin-right:4px; }
.mini-player .mini-close:hover { background:#111; }
.mini-player .mini-close:active { transform:translateY(1px); }

/* ------------------------------
    Toast (transient popup messages)
    ------------------------------ */
/* Unified toast style (aligned with pure_html) */
/* Toast (RIA variant top under nav) */
.toast { position:fixed; left:50%; top:84px; transform:translateX(-50%) translateY(-18px); background:color-mix(in oklab, var(--am-accent) 24%, #fff); color:#000; padding:12px 26px; border:2px solid var(--am-accent); border-radius:38px; font-size:.78rem; line-height:1.35; font-weight:700; letter-spacing:.4px; opacity:0; pointer-events:none; z-index:1300; max-width:78vw; display:inline-flex; align-items:center; gap:12px; box-shadow:0 14px 34px -10px rgba(0,0,0,.4); backdrop-filter:saturate(140%) blur(6px); transition:opacity .35s ease, transform .35s ease; }
.toast.show { opacity:1; transform:translateX(-50%) translateY(0); }
@media (prefers-color-scheme: dark){ .toast{ background:color-mix(in oklab, var(--am-accent) 28%, #000); color:#000; } }

.track-multi-wrapper { position:relative; }
/* Aggiunto padding-right extra per lasciare 2px di aria prima della barra personalizzata */
.track-multi-select { min-height:340px; height:340px; width:100%;   padding: 6px calc(10px + var(--track-multi-lane)) 6px 10px;
    font-size:.75rem; line-height:1.2; border:2px solid #000; border-radius:30px; background:#fff; color:#000; outline:none; resize:none; overflow-y:scroll; scrollbar-width:none; }
.track-multi-select::-webkit-scrollbar { display:none; }
.track-multi-select option { padding:20px 20px; margin:2px var(--track-multi-lane) 10px 0; border:2px solid #000; background:#fff; border-radius:24px; display:block; font-size:.74rem; line-height:1.1; }
.track-multi-select option:checked { background:#000; color:#fff; border-color:#000; }
.track-multi-select:focus { box-shadow:0 0 0 2px #000;}

:root{
    /* larghezza corsia riservata alla scrollbar + aria */
    --track-multi-lane: 44px; /* aumentato per lasciare più spazio tra opzioni e scrollbar */
}
/* Barra esterna */
.track-multi-scrollbar {
    position: absolute;
    top: 16px;    /* leave a top gap so thumb doesn't overlap top rounded corner */
    bottom: 16px; /* leave a bottom gap so thumb doesn't overlap bottom rounded corner */
    right: 5px;
    width: 8px;
    display: flex;
    align-items: flex-start;
    justify-content: center;
}
.track-multi-scrollbar-track { position: relative; right:10px; width: 100%; background: transparent; height: 100%; }

.track-multi-scrollbar-thumb { position:absolute; top:0; left:1px; width:11px; height:130px; background: #000; border-radius:8px; cursor:pointer; display:block; }
.track-multi-scrollbar-thumb:hover { background:#000; }
/* Ombreggiatura per visibilità su sfondi chiari */
.track-multi-scrollbar-thumb:after { content:""; position:absolute; inset:0; border:1px solid #fff3; border-radius:inherit; }
/* Nasconde selezione testo durante drag */
.track-multi-wrapper.dragging { user-select:none; }

/* Checkbox-list variant to allow selecting scattered options */
.track-multi-checkbox-list {
    min-height:220px;
    height:260px;
    width:100%;
    padding:5px 11px 5px 9px;
    background:#fff;
    border:2px solid #000;
    border-radius:30px;
    overflow-y:scroll;
    display:flex;
    flex-direction:column;
    gap:8px;
}
.track-multi-checkbox-list::-webkit-scrollbar { display:none; }
.track-checkbox-row {
    display:flex;
    align-items:center;
    gap:12px;
    padding:6px 4px; /* meno padding per avvicinare al bordo del contenitore */
    border-radius:0; /* rimuovo il riquadro tondeggiante */
    border:0; /* rimuovo bordo nero */
    background: transparent; /* rimuovo background bianco */
}
/* visually hide the native checkbox but keep it focusable and operable */
.track-checkbox-input {
    position: absolute;
    opacity: 0;
    width: 1px; height: 1px;
    margin: 0; padding: 0;
    pointer-events: none;
}
/* label shows the visible checkbox using ::before; input must be immediately before label in DOM */
.track-checkbox-label {
    flex: 1;
    cursor: pointer;
    font-size: .95rem;
    color: #000;
    display: inline-flex;
    align-items: center;
    gap: 12px; /* spazio tra quadratino e testo */
}
.track-checkbox-label::before {
    content: '';
    width: 13px; height: 13px; /* ~30% smaller (from 20px) */
    border: 2px solid #000;
    border-radius: 5px;
    background: #fff;
    display: inline-block;
    flex: 0 0 auto;
    margin-left: 6px; /* sposta il quadratino verso sinistra rispetto a dove iniziava il riquadro */
}
/* checked state */
.track-checkbox-input:checked + .track-checkbox-label::before {
    background: #000;
}
/* keyboard focus style */
.track-checkbox-input:focus + .track-checkbox-label::before {
    box-shadow: 0 0 0 3px rgb(250, 44, 139);
}
.track-checkbox-row:hover { background: color-mix(in oklab, #fff 94%, var(--am-text)); }
.no-tracks-msg { padding:10px 14px; color:var(--am-muted); }

/* Pagination centering fix (parity with pure_html): center label absolutely and pin Prev/Next */

/* Also support the JS-rendered RIA pagination markup (.tracks-pagination) */
.tracks-pagination{position:relative;display:flex;align-items:center;justify-content:space-between}
.tracks-pagination .center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);flex:none;max-width:calc(100% - 260px);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}
.tracks-pagination .button.right, .tracks-pagination .btn.right{display:flex;margin-left:auto;align-items:center;justify-content:center}
.tracks-pagination .button.left, .tracks-pagination .btn.left{display:flex;align-items:center;justify-content:center}

/* ===== Player cover as blurred page background ===== */
body.has-player-bg .page-wrapper{position:relative;z-index:2}
#playerCoverBg.player-bg{
    position:fixed;inset:0;z-index:1;pointer-events:none;
    background-position:center center; background-size:cover; background-repeat:no-repeat;
    filter:blur(14px) saturate(101%);
    transform:scale(1.01); /* avoid edge clipping after blur */
}
/* subtle dark/tint overlay for readability */
#playerCoverBg.player-bg::after{
    content:""; position:absolute; inset:0;
    background:linear-gradient(180deg, rgba(0,0,0,0.28) 0%, rgba(0,0,0,0.45) 100%);
}

/* Cover (track/playlist) border: 2px solid grey matching muted text color */
.track-cover, .cover-thumb, .player-cover img {
    border: 2px solid rgba(110,110,115,0.8); /* same tone as --am-muted */
}

/* If cover uses rounded corners, keep consistent radius */
.track-cover, .cover-thumb { border-radius: 8px; }

/* Small helper: when specific modal IDs are targeted later, the user can switch to #create-playlist .modal-content etc. */

/*attiva o disattiva messaggi toast*/
.toast { display: none !important; pointer-events: none !important; }



