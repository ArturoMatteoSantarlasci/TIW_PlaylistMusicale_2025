
/* ==========================================================================
    Apple Music–inspired Theme (customized pink variant)
    Target: header, playlists-vertical, track-card, modals, auth pages
    ========================================================================== */

/* ------------------------------
   Design Tokens
   ------------------------------ */
:root {
    /* Light theme (default) */
    --am-bg: #ffffff;
    --am-bg-alt: #f5f5f7;          /* page sections */
    --am-surface: #ffffff;         /* cards */
    --am-text: #fa2c8b;
    --am-muted: #6e6e73;
    --am-border: #d2d2d7;
    --am-accent: #fa2c8b;          /* Apple pink */
    --am-accent-press: #0062c6;
    --am-shadow: 0 6px 20px rgba(0,0,0,.08);
    --am-radius: 16px;
    --am-radius-pill: 999px;
    --am-ctrl-h: 52px;
    --am-ctrl-h-sm: 44px;
    --am-icon: 38px;
    --am-focus: 0 0 0 3px rgba(0,113,227,.35);
}

@media (prefers-color-scheme: dark) {
    :root {
        --am-bg: #0b0b0f;            /* near‑black with subtle blue tint */
        --am-bg-alt: #121216;
        --am-surface: #16161b;
        --am-text: #f5f5f7;
        --am-muted: #a1a1aa;
        --am-border: #2a2a31;
        --am-accent: #fa2c8b;
        --am-accent-press: #0062c6;
        --am-shadow: 0 10px 28px rgba(0,0,0,.35);
    }
}

/* ------------------------------
   Global reset + typography
   ------------------------------ */
html { -webkit-text-size-adjust: 100%; }
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
    margin: 0;
    color: var(--am-text);
    background: var(--am-bg);
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display",
    "Segoe UI", Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.45;
}

/* Page shell */
body.page-home {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    background: var(--am-bg);
}

/* Auth & general title boxed variant (compact) */
.title-box { margin:26px auto 18px; text-align:center; font-weight:800; letter-spacing:.5px; font-size:clamp(1.4rem,1.1rem + .9vw,2rem); padding:14px 30px; background:#fff; border:2px solid var(--am-accent); border-radius:40px; color:#000; max-width:760px; box-shadow:0 3px 10px -4px rgba(0,0,0,.12); }

/* Utilities */
.sr-only { position:absolute; width:1px; height:1px; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); }
.hidden { display:none !important; }

.wrap { width: 100%; max-width: 1220px; margin: 0 auto; padding: 0 24px; }
.panel, .stack { display: grid; gap: 18px; }

/* ------------------------------
   Header (sticky, blurred like AM)
   ------------------------------ */
.header {
    position: sticky;
    top: 0;
    z-index: 100;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 12px;
    padding: 12px 20px;
    background: color-mix(in oklab, var(--am-bg) 90%, transparent);
    backdrop-filter: saturate(120%) blur(12px);
    border-bottom: 1px solid var(--am-border);
}

.header-title {
    margin: 0;
    text-align: center;
    font-weight: 800;
    letter-spacing: .2px;
    font-size: clamp(1.25rem, 1rem + 1.2vw, 2rem);
}

/* ------------------------------
   Section container
   ------------------------------ */
.main {
    flex: 1;
    padding: 18px 0 36px;
    background: var(--am-bg);
}

.board {
    background: var(--am-surface);
    border: 1px solid var(--am-border);
    border-radius: var(--am-radius);
    padding: 22px;
    box-shadow: var(--am-shadow);
}

/* Full-width title strip under header */
.title-strip { width:100%; margin:18px 0 14px; }
.title-strip-inner { max-width:1220px; margin:0 auto; padding:14px 34px; background:#fff; border:2px solid var(--am-accent); border-radius:46px; font-weight:800; font-size:clamp(1.4rem,1.05rem + .9vw,2rem); letter-spacing:.5px; text-align:center; color:#000; box-shadow:0 3px 10px -4px rgba(0,0,0,.10); }
.playlists-wrapper { max-width:1220px; margin:0 auto; padding:0 24px 40px; }
.tracks-wrapper { max-width:1220px; margin:0 auto; padding:0 24px 40px; }
.tracks-pagination { display:flex; align-items:center; justify-content:space-between; margin-top:34px; gap:8px; }
.tracks-pagination .left { margin-left:8px; }
.tracks-pagination .right { margin-right:8px; }
.tracks-pagination .center { flex:1; text-align:center; font-weight:600; }

/* ------------------------------
   Controls (buttons, fields, icon buttons)
   ------------------------------ */
.btn, .button {
    -webkit-tap-highlight-color: transparent;
    height: var(--am-ctrl-h);
    border-radius: var(--am-radius-pill);
    border: 2px solid var(--am-accent);
    background: #fff;
    color: #000;
    font-weight: 800;
    letter-spacing: .3px;
    padding: 0 20px;
    cursor: pointer;
    transition: transform .05s ease, box-shadow .15s ease, background .15s ease, color .15s ease;
    box-shadow: 0 1px 0 rgba(0,0,0,.12);
    text-decoration: none;
}
.btn:hover, .button:hover { box-shadow: 0 6px 18px rgba(0,0,0,.14); }
.btn:active, .button:active { transform: translateY(1px); }

/* Secondary (outlined) */
.btn.secondary, .button.logout, .logout.button { height: var(--am-ctrl-h); background: #fff; color:#000; border-color: var(--am-accent); }
.btn.secondary:hover,
.button.logout:hover,
.logout.button:hover {
    background: #fff;
    filter:brightness(0.95);
}

/* Accent (Apple blue) */
.btn.accent {
    background: var(--am-accent);
    border-color: color-mix(in oklab, var(--am-accent) 85%, #000);
}
.btn.accent:hover { background: var(--am-accent); box-shadow: 0 8px 22px rgba(10,132,255,.35); }
.btn.accent:active { background: var(--am-accent-press); }

/* Icon-only circular button */
.iconbtn {
    width: var(--am-icon);
    height: var(--am-icon);
    display: grid;
    place-items: center;
    border-radius: 50%;
    border: 2px solid var(--am-accent);
    background: var(--am-surface);
    cursor: pointer;
    transition: background .15s ease, transform .05s ease;
}
.iconbtn:hover { background: color-mix(in oklab, var(--am-surface) 92%, var(--am-text)); }
.iconbtn:active { transform: translateY(1px); }

/* Form fields */
.field {
    position: relative;
    display: flex;
    align-items: center;
    gap: 10px;
    height: var(--am-ctrl-h);
    padding: 0 16px;
    border-radius: var(--am-radius-pill);
    background: var(--am-surface);
    border: 1px solid var(--am-border);
    margin-bottom: 12px;
}
.field input {
    width: 100%;
    border: 0;
    outline: 0;
    background: transparent;
    color: var(--am-text);
    font-size: 1rem;
}
.badge {
    position: absolute;
    top: 50%; left: 8px;
    transform: translateY(-50%);
    width: 42px; height: 42px;
    border-radius: 50%;
    background: var(--am-accent);
    color: #fff;
    display: grid; place-items: center;
    box-shadow: 0 6px 16px rgba(10,132,255,.25);
}
.field.pad-left { padding-left: 64px; }

/* Center auth form buttons (login/register). Stack already grid; ensure full width buttons consistent */
form.stack > .btn, form.stack > .button, form.stack > a.btn { width:100%; display:flex; align-items:center; justify-content:center; }
form.stack > a.btn { text-align:center; }
/* Remove underline explicitly */
a.btn { text-decoration:none; }

/* Focus visible */
.button:focus-visible, .btn:focus-visible, .field:focus-within,
.iconbtn:focus-visible, .playlist-card-row:focus-visible, .track-card:focus-visible {
    outline: none;
    box-shadow: var(--am-focus);
}

/* ------------------------------
   Lists: Playlists (vertical rows)
   ------------------------------ */
.playlists-vertical { display:grid; gap:6px; margin-top:4px; }

.playlist-card-row {
    position: relative;
    display: block;
    padding: 16px 64px 16px 16px;
    background: var(--am-surface);
    border: 1px solid var(--am-border);
    border-radius: var(--am-radius);
    cursor: pointer;
    transition: background .15s ease, transform .06s ease, box-shadow .15s ease, border-color .15s ease;
}
.playlist-card-row:hover {
    background: color-mix(in oklab, var(--am-surface) 90%, var(--am-text));
    box-shadow: 0 8px 22px rgba(0,0,0,.08);
    border-color: color-mix(in oklab, var(--am-border) 70%, var(--am-text));
}
.playlist-card-row:active { transform: translateY(1px); }

.playlist-card-row .pl-name { margin:0; font-weight:800; font-size:1rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; letter-spacing:.2px; color:#000; }

/* Inline reorder button (right edge) */
.playlist-reorder-inline,
.reorder-btn {
    position: absolute;
    top: 50%;
    right: 12px;
    transform: translateY(-50%);
    width: 36px; height: 36px;
    display: grid; place-items: center;
    background: color-mix(in oklab, var(--am-surface) 88%, var(--am-text));
    border-radius: 10px;
    cursor: pointer;
    transition: background .15s ease, border-color .15s ease;
}
.playlist-reorder-inline:hover,
.reorder-btn:hover {
    background: color-mix(in oklab, var(--am-surface) 80%, var(--am-text));
    border-color: color-mix(in oklab, var(--am-border) 70%, var(--am-text));
}
.reorder-btn svg { width: 18px; height: 18px; }

/* ------------------------------
   Tracks (vertical cards)
   ------------------------------ */
.tracks-vertical { display:grid; gap:8px; margin-top:8px; }

.track-card {
    display: grid;
    grid-template-columns: 60px 1fr;
    gap: 14px;
    align-items: center;
    min-height: 76px;
    padding: 12px 14px;
    background: var(--am-surface);
    border: 1px solid var(--am-border);
    border-radius: var(--am-radius);
    cursor: pointer;
    transition: background .15s ease, transform .06s ease, box-shadow .15s ease, border-color .15s ease;
}
.track-card:hover {
    background: color-mix(in oklab, var(--am-surface) 90%, var(--am-text));
    box-shadow: 0 8px 22px rgba(0,0,0,.08);
    border-color: color-mix(in oklab, var(--am-border) 70%, var(--am-text));
}
.track-card:active { transform: translateY(1px); }

.track-cover {
    width: 60px; height: 60px;
    border-radius: 12px;
    overflow: hidden;
    background: #f0f0f0;
    border: 1px solid var(--am-border);
    display: grid; place-items: center;
}
.track-cover img { width: 100%; height: 100%; object-fit: cover; display: block; }
.track-cover--placeholder { color: var(--am-muted); font-size: 1rem; opacity: .8; }

.track-info { min-width: 0; display: grid; gap: 4px; }
.track-title {
    font-weight: 700;
    font-size: .98rem;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
    color:#000;
}
.track-sub {
    font-size: .78rem;
    color: var(--am-muted);
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* ------------------------------
   Player view
   ------------------------------ */
.player-track-info {
    display: flex;
    gap: 28px;
    align-items: center;
    flex-wrap: nowrap;
    margin: 26px auto 0;
    padding: 30px 46px 40px 46px;
    max-width: 1240px;
    background: #fff;
    border: 2px solid var(--am-accent);
    border-radius: 46px;
    box-shadow: 0 6px 20px -6px rgba(0,0,0,.12);
}
.player-cover {
    flex: 0 0 auto;
    max-width: 200px;
    border-radius: 26px;
    overflow: hidden;
    border: 1px solid var(--am-border);
    background: #00000012;
    box-shadow: 0 6px 18px rgba(0,0,0,.12);
}
.player-cover img { display:block; width:100%; height:auto; }
.player-text { flex: 1 1 auto; min-width: 0; display:grid; gap: 6px; }
.player-title { font-weight: 800; font-size: 1.25rem; letter-spacing: .2px; color:#000; }
.player-artist, .player-album, .player-year, .player-genre {
    font-size: .9rem; color: var(--am-muted);
}
.player-sep { display:none; }
.player-text audio {
    width: 100%;
    max-width: 640px;
    background: #fff;
    border: 2px solid var(--am-accent);
    border-radius: var(--am-radius-pill);
    padding: 10px 20px;
    display: block;
    box-sizing: border-box;
    margin-top: 4px;
}

/* Dark mode tweaks for new player styles */
@media (prefers-color-scheme: dark) {
    .player-title { color: #f5f5f7; }
    .player-text audio { background: var(--am-surface); border-color: var(--am-accent); }
    .player-track-info { background: var(--am-surface); }
}

/* ------------------------------
   Modal nav bars (for compatibility)
   ------------------------------ */
.nav-bar {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 16px;
}
.spacer { flex: 1; }
.modal-window {
    position: fixed; inset: 0;
    display: grid; place-items: center;
    background: rgba(0,0,0,.55);
    z-index: 9999;
}
.modal-content {
    width: min(560px, 92vw);
    max-height: 82vh; overflow: auto;
    background: var(--am-surface);
    border: 1px solid var(--am-border);
    border-radius: var(--am-radius);
    padding: 24px;
    box-shadow: var(--am-shadow);
}
.modal-title { margin:0 0 14px; font-size:1.05rem; font-weight:800; color:#000; display:inline-block; padding:8px 20px; border:2px solid var(--am-accent); border-radius:999px; background:#fff; }
.modal-content, .modal-window form, .modal-window label, .modal-window input, .modal-window select, .modal-window div, .modal-window span { color:#000; }
.modal-close { background:#fff; border:1px solid var(--am-border); color:#000; font-weight:700; cursor:pointer; padding:8px 16px; border-radius:14px; }
.modal-close:hover { background:#fff; filter:brightness(0.92); }

/* Modal form grid spacing utility */
.modal-form-grid { display:grid; gap:8px; }
/* When using grid gap, remove extra bottom margins on fields inside */
.modal-form-grid .field { margin-bottom:0; }

/* Compact overrides inside modals */
.modal-window .field { gap:6px; height:42px; padding:0 12px; margin-bottom:4px; }
.modal-window .label { margin-bottom:2px; font-size:.78rem; }

/* Extra spacing at bottom of modal forms so last button not glued */
.modal-content form { padding-bottom:12px; }
.modal-content form .btn:last-child, .modal-content form .button:last-child { margin-top:14px; }

/* ------------------------------
   Labels
   ------------------------------ */
.label {
    display: block;
    margin-bottom: 4px;
    font-weight: 600;
    font-size: .85rem;
    color: var(--am-text);
}
.alert {
    margin: 0 0 6px;
    padding: 10px 14px;
    border-radius: 12px;
    background: #fff2f2;
    border: 1px solid #ffdada;
    color: #7a0000;
}
@media (prefers-color-scheme: dark) {
    .alert {
        background: #3a1212;
        border-color: #5a2020;
        color: #ffd7d7;
    }
}

/* ------------------------------
   Helpers & composition
   ------------------------------ */
.actions-row { display:flex; gap:12px; flex-wrap:wrap; justify-content:center; }
.actions-row .btn { width:auto; min-width:200px; }

.floating-home { position: absolute; top: 10px; right: 10px; }

/* One-line ellipsis utility */
.ellipsis-1 { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Smooth hover scale for images */
img.scale-on-hover { transition: transform .25s ease; }
img.scale-on-hover:hover { transform: scale(1.03); }

/* ------------------------------
   Responsive tweaks
   ------------------------------ */
@media (max-width: 880px) {
    .wrap { padding: 0 16px; }
    .actions-row .btn { min-width: 160px; }
    .player-track-info { flex-direction: column; align-items: stretch; }
    .player-cover { max-width: 100%; }
}
