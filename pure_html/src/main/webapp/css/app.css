/* =========================================
   TOKENS & RESET
========================================= */
:root{
    /* colori */
    --bg:#062a2c;
    --pill:#ffffff22;
    --pill-brd:#ffffff33;
    --txt:#e8f1f2;
    --muted:#c6d0d1;
    --accent:#ffffff;

    /* raggi / dimensioni */
    --radius-pill:999px;
    --w:460px;
    --page-pad:clamp(12px, 4vw, 36px);

    /* componenti ricorrenti */
    --control-h:58px;
    --control-h-sm:46px;
    --iconbtn:42px;
    --iconbtn-sm:36px;
    --badge:42px;
}

*{ box-sizing:border-box }
html,body{ height:100% }

body{
    margin:0; background:var(--bg); color:var(--txt);
    font-family:system-ui,-apple-system,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif;
    display:grid; place-items:center; padding:24px;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}

body.page-tracks{
    place-items: start center;
}

a{ color:inherit; text-decoration:none }
button,input,select,textarea{ font:inherit }
:focus-visible{ outline:2px solid #9fe7ff; outline-offset:2px }

/* =========================================
   LAYOUT BASE
========================================= */
.wrap{ width:100%; max-width:var(--w) }
.title{
    text-align:center; font-weight:800; letter-spacing:.2px; margin:0 0 26px;
    font-size:clamp(1.4rem, 2vw + 1rem, 2rem);
}
.panel{ display:grid; gap:14px; }

/* =========================================
   ALERTS
========================================= */
.alert{
    margin:0 0 4px; padding:10px 14px; border-radius:12px; font-size:.95rem;
    background:#5a1f1f; border:1px solid #ff8f8f55; color:#ffe1e1;
}

/* =========================================
   FORM FIELDS
========================================= */
form{ display:grid; gap:16px; }

.field{
    position:relative; height:var(--control-h); border-radius:var(--radius-pill);
    background:var(--pill); border:1px solid var(--pill-brd); overflow:hidden;
    display:flex; align-items:center; padding:0 18px;
}
.field input{
    width:100%; height:100%; background:transparent; border:0; outline:0;
    color:var(--txt); font-size:1.05rem; -webkit-appearance:none; appearance:none;
}

/* badge icon (sx/dx) */
.badge{
    position:absolute; top:50%; transform:translateY(-50%);
    width:var(--badge); height:var(--badge); border-radius:50%; background:var(--accent);
    display:grid; place-items:center; box-shadow:0 3px 10px rgba(0,0,0,.25);
}
.badge.left{ left:8px; }
.badge.right{ right:8px; }
.field.pad-left{ padding-left:62px; }
.field.pad-right{ padding-right:62px; }
.badge svg{ width:22px; height:22px; color:#0b2430; }

/* =========================================
   BUTTONS
========================================= */
.btn{
    height:var(--control-h); border-radius:var(--radius-pill); font-weight:800; letter-spacing:.6px;
    border:1px solid transparent; cursor:pointer; display:inline-flex; align-items:center; justify-content:center;
    width:100%; background:#fff; color:#0c2b30;
}
.btn:hover{ filter:brightness(1.02) contrast(1.02); }

.btn.secondary{
    height:var(--control-h-sm); background:transparent; color:var(--muted);
    border-color:#ffffff66;
}
.btn.secondary:hover{ background:#ffffff12; color:#fff; }

.btn.ghost{
    background:transparent; color:var(--txt);
    border-color:#ffffff66;
}
.btn.ghost:hover{ background:#ffffff12; }

/* =========================================
   UTILITIES
========================================= */
.stack{ display:grid; gap:18px; }

/* =========================================
   PLAYER PAGE
========================================= */
.wrap.wide{ max-width:680px; }

/* media card */
.media{ display:grid; gap:18px; }
.cover img{
    width:100%; height:auto; display:block; border-radius:16px;
    box-shadow:0 16px 40px rgba(0,0,0,.35);
}
.meta .song-title{ margin:.4rem 0 .2rem; font-size:1.6rem; font-weight:800; }
.meta .artist{ margin:0; color:var(--txt); opacity:.9; }
.meta .albumline{ margin:.2rem 0 0; color:var(--muted); }

/* audio + tempi */
.audio-box audio{ width:100%; }
.time-row{
    display:flex; justify-content:space-between; align-items:center;
    font-variant-numeric:tabular-nums; color:var(--muted); margin-top:4px;
}

/* =========================================
   PLAYLIST PAGE
========================================= */
/* barra azioni sopra la lista */
.actions-row{ display:flex; gap:12px; margin-bottom:0; }
.actions-row.between{ justify-content:space-between; align-items:center; }
.actions-row.top-actions .btn{ width:auto; min-width:220px; padding-inline:20px; text-align:center; }
.actions-row.top-actions .btn.ghost{ min-width:200px; }

/* lista brani */
.tracks{
    list-style:none; padding:0; margin:0; display:grid; gap:10px;
}
.track{
    display:grid;
    grid-template-columns:40px 1fr auto auto;
    align-items:center; gap:12px; padding:12px 14px;
    background:var(--pill); border:1px solid var(--pill-brd); border-radius:14px;
}
.track.playing{ outline:2px solid #9fe7ff40; }

.idx{
    width:40px; height:40px; border-radius:999px;
    display:grid; place-items:center; background:#ffffff18; border:1px solid #ffffff28; font-weight:700;
}
.info{ min-width:0; }
.info .t{ font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.info .a{ color:var(--muted); font-size:.95rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.dur{ color:var(--muted); font-variant-numeric:tabular-nums; margin-right:8px; }
.row-actions{ display:flex; gap:8px; }

/* icon buttons (riuso con variabile dimensione) */
.iconbtn{
    --_s: var(--iconbtn);
    width:var(--_s); height:var(--_s); border-radius:999px; background:var(--pill);
    border:1px solid var(--pill-brd); display:grid; place-items:center;
}
.iconbtn:hover{ background:#ffffff33; }
.iconbtn svg{ width:20px; height:20px; color:var(--txt); }

.iconbtn.tiny{
    --_s: var(--iconbtn-sm);
}
.iconbtn.tiny svg{ width:18px; height:18px; }

/* mini-player flottante */
.floating-player{
    position:fixed; left:50%; transform:translateX(-50%);
    bottom:max(12px, env(safe-area-inset-bottom, 12px));
    display:flex; align-items:center; gap:14px;
    background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.25);
    backdrop-filter:blur(10px); padding:10px 12px; border-radius:999px;
    box-shadow:0 12px 32px rgba(0,0,0,.35); z-index:40; max-width:92vw;
}
.fp-left, .fp-right{ display:flex; align-items:center; gap:8px; }
.fp-center{ min-width:0; display:grid; }
.fp-title{ font-weight:700; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.fp-sub{ color:var(--muted); font-size:.9rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.fp-time{ color:var(--muted); font-variant-numeric:tabular-nums; }

/* responsive stretto */
@media (max-width:560px){
    .track{ grid-template-columns:36px 1fr auto auto; padding:10px 12px; }
    .idx{ width:36px; height:36px; }
    .dur{ display:none; }      /* nasconde durata per spazio */
    .fp-sub{ display:none; }   /* mini-player più compatto */
}

/* =========================================
   CORNER BUTTONS / SAFE AREAS
========================================= */
:root{
    --safe-top:12px; --safe-left:12px; --safe-right:12px;
}
@supports (padding:max(0px)){
    :root{
        --safe-top:max(12px, env(safe-area-inset-top));
        --safe-left:max(12px, env(safe-area-inset-left));
        --safe-right:max(12px, env(safe-area-inset-right));
    }
}
.corner{ position:fixed; z-index:50; backdrop-filter:blur(6px); }
.corner-left{  top:var(--safe-top); left:var(--safe-left); }
.corner-right{ top:var(--safe-top); right:var(--safe-right); }
.corner-center{
    position:fixed; z-index:50; top:var(--safe-top); left:50%; transform:translateX(-50%);
}

/* Nasconde l’eventuale topbar legacy (manteniamo comportamento attuale) */
.topbar{ display:none !important; }

/* =========================================
   HOME (pagina piena, header fissato, rail orizzontale)
========================================= */
body.page-home{
    display:flex; flex-direction:column; min-height:100vh; padding:0;
    background:
            radial-gradient(60vmax 60vmax at -10% -20%, rgba(56,227,255,.35), transparent 60%),
            radial-gradient(60vmax 60vmax at 110% 110%, rgba(116,240,192,.35), transparent 60%),
            var(--bg);
}

.header{
    display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:12px;
    padding:12px var(--page-pad);
    position:sticky; top:0; z-index:100;
    background:linear-gradient(to bottom, rgba(6,42,44,.96), rgba(6,42,44,.76));
    backdrop-filter:blur(6px); border-bottom:1px solid var(--pill-brd);
}
.header-left{ justify-self:start; max-width:420px; width:100%; }
.header-right{
    justify-self:end;
    width:auto; min-width:140px; padding-inline:15px; text-align:center; /* override del width:100% di .btn */
}
.header-title{
    margin:0; text-align:center; font-weight:800;
    font-size:clamp(1.3rem, 1rem + 1.6vw, 2.2rem);
}

.main{
    flex:1; padding:16px var(--page-pad) 24px; display:grid; gap:16px;
}

/* riquadro centrale */
.board{
    background:var(--pill); border:1px solid var(--pill-brd); border-radius:16px;
    padding:18px; max-width:min(1280px, 98vw); margin:0 auto;
    box-shadow:0 14px 40px rgba(0,0,0,.35); backdrop-filter:blur(8px);
    margin-top:-200px; /* NOTE: legacy lift; sostituibile con spacing strutturale nel layout */
}

/* griglia playlist + rail */
.field.search{ flex:1; max-width:420px; }

.grid.playlists{
    display:grid; grid-template-columns:repeat(auto-fill, minmax(200px, 1fr));
    gap:16px; margin-top:10px;
}
.pl-card{
    display:grid; gap:10px; background:var(--pill); border:1px solid var(--pill-brd);
    border-radius:16px; padding:12px; color:inherit; text-decoration:none;
    transition:background .15s ease, transform .08s ease;
}
.pl-card:hover{ background:#ffffff22; transform:translateY(-1px); }
.pl-cover img{
    width:100%; height:auto; display:block; border-radius:12px; box-shadow:0 10px 26px rgba(0,0,0,.25);
}
.pl-meta{ display:grid; gap:2px; }
.pl-name{ margin:0; font-weight:800; }
.pl-sub{ margin:0; color:var(--muted); }

/* rail orizzontale */
.rail{ display:flex; gap:14px; overflow-x:auto; scroll-snap-type:x mandatory; padding-bottom:8px; }
.rail .pl-card{ flex:0 0 220px; scroll-snap-align:start; }
.board .rail{ justify-content:center; }

/* scrollbar moderna per rail */
.rail{ scrollbar-width:thin; scrollbar-color:#9fe7ff44 transparent; }
.rail::-webkit-scrollbar{ height:8px; }
.rail::-webkit-scrollbar-track{ background:transparent; }
.rail::-webkit-scrollbar-thumb{ background:#9fe7ff44; border-radius:999px; }
.rail::-webkit-scrollbar-thumb:hover{ background:#9fe7ff66; }

/* mobile tweaks */
@media (max-width:560px){
    .header{ grid-template-columns:1fr auto 1fr; }
    .header-left{ max-width:100%; }
    .actions-row.top-actions .btn{ width:100%; }
    .rail .pl-card{ flex-basis:180px; }
}
@media (max-width:480px){
    .grid.playlists{ grid-template-columns:repeat(auto-fill, minmax(160px, 1fr)); }
}
