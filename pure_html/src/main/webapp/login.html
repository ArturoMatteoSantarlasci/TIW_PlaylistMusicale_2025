<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Benvenuto su Playlist Manager</title>
    <link rel="stylesheet" href="css/app.css" th:href="@{/css/app.css}" />
    <link rel="icon" sizes="32x32" type="image/png" href="img/icon2.png" th:href="@{/img/icon2.png}">
</head>
<body>
<!-- Toast top (registrazione) mostrato solo se ?reg=1 -->
<div id="regToast" class="toast toast--top" th:if="${param.reg != null and param.reg[0] == '1'}">Registrazione avvenuta con successo</div>
<div class="wrap">
    <h1 class="title-box">PLAYLIST MANAGER</h1>

  <div class="auth-box">
        <!-- Errore opzionale (da ?error=... o variabile server) -->
        <div class="alert" th:if="${param.error or error}">
        <span th:text="${param.error != null ? param.error[0] : (error != null ? error : 'Credenziali non valide')}">
          Credenziali non valide
        </span>
        </div>

        <!-- IMPORTANT: action e th:action devono combaciare con la servlet @WebServlet("/Login") -->
        <form action="/Login" th:action="@{/Login}" method="post" autocomplete="on" class="stack">
            <!-- Nickname -->
            <div class="field pad-left">
          <span class="badge left" aria-hidden="true">
            <!-- utente -->
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.4 0-8 2.2-8 5v1h16v-1c0-2.8-3.6-5-8-5Z"/>
            </svg>
          </span>
                <input type="text" id="nickname" name="nickname" placeholder="Nickname" required />
            </div>

            <!-- Password -->
            <div class="field pad-left">
          <span class="badge left" aria-hidden="true">
            <!-- lucchetto -->
            <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 1a5 5 0 0 0-5 5v3H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V11a2 2 0 0 0-2-2h-2V6a5 5 0 0 0-5-5Zm3 8H9V6a3 3 0 0 1 6 0Z"/>
            </svg>
          </span>
                <input type="password" id="password" name="password" placeholder="Password" minlength="6" required />
            </div>

            <!-- Azioni -->
      <button class="btn" type="submit">LOGIN</button>

      <a class="btn auth-secondary" href="#" th:href="@{/Register}">REGISTRATI</a>
        </form>
    </div>
</div>

<!-- Rimosso lo script: il toast Ã¨ gestito lato server con th:if su param.reg -->
</body>
</html>
