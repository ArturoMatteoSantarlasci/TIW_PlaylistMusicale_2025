<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Player • Playlist Manager</title>
    <link rel="stylesheet" href="css/app.css" th:href="@{/css/app.css}" />
    <link rel="icon" sizes="32x32" type="image/png" href="img/icon2.png" th:href="@{/img/icon2.png}">
</head>
<body class="page-player">
<header class="header">
    <div class="header-left"></div>
    <div class="header-right actions-row" style="gap:14px;">
        <a class="iconbtn" aria-label="Homepage" href="HomePage" th:href="@{/HomePage}">
            <svg viewBox="0 0 24 24" width="29" height="29"
                 fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <!-- contorno casa -->
                <path d="M3 11l9-7 9 7"/>
                <path d="M5 10v9a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-9"/>
                <!-- porta piena -->
                <rect x="10" y="14" width="4" height="7" rx="1" ry="1" fill="currentColor" stroke="none"/>
            </svg>
        </a>
        <a class="btn secondary logout"
           style="font-size:1.17rem !important; font-weight:800 !important; height:50px !important; padding:0 16px !important; display:flex !important; align-items:center !important; justify-content:center !important;"
           th:href="@{/Logout}" href="Logout">Logout</a>
        <!-- Torna alla playlist o all'elenco, senza JS -->
        <a id="backToPlaylistBtn" class="iconbtn" title="Torna alla playlist" aria-label="Torna alla playlist" th:href="${backUrl}" href="#">
            <svg viewBox="0 0 24 24" width="29" height="29" fill="currentColor" aria-hidden="true">
                <path d="M10 9V5L3 12l7 7v-4.1c5.1 0 8.6 1.8 11 5.1
             c-1-5.7-4.6-10.9-11-11.0H10z"/>
            </svg>
        </a>
    </div>
</header>

<div class="player-track-info">
    <div class="player-cover">
        <img th:if="${track.coverUrl != null and !#strings.isEmpty(track.coverUrl)}" th:src="${track.coverUrl}" th:alt="${'Copertina di ' + track.title}" alt="Cover" />
        <img th:if="${track.coverUrl == null or #strings.isEmpty(track.coverUrl)}" th:src="@{/img/placeholder_cover.svg}" alt="Placeholder" />
    </div>
    <div class="player-text">
        <div class="player-title" th:text="${track.title}">Titolo</div>
        <div class="player-artist" th:text="${track.artist}">Artista</div>
        <div class="player-album" th:if="${track.albumLine != null}" th:text="${track.albumLine}">Album · Anno · Genere</div>
        <!-- Audio element visibile con controlli (pill) -->
        <audio id="player-audio" controls preload="metadata" th:src="${track.audioUrl}" aria-label="Player traccia"></audio>
    </div>
</div>

<!-- Nessuno script: logica di ritorno e UI gestite lato server/HTML -->
</body>
</html>
